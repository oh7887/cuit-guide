Thought for 3.73 seconds

æˆ‘æ¥å¸®ä½ è®¾è®¡ä¸€ä¸ªç±»ä¼¼ CatPaw çš„èŠå¤©å®¢æˆ·ç«¯æ¶æ„æ–¹æ¡ˆã€‚é¦–å…ˆè®©æˆ‘äº†è§£ä¸€ä¸‹ç°æœ‰çš„é¡¹ç›®ç»“æ„å’Œå‚è€ƒå®ç°ã€‚

å·²è¯»å–
cuit-guide
(32)

å·²è¯»å–
reference
(2)

å·²è¯»å–
reference/open-mcp-client
(15)

å·²è¯»å–
packages
(2)

å·²è¯»å–
packages/client
(15)

å·²è¯»å–
packages/agent
(1)

å·²è¯»å–
client/src
(13)

å·²è¯»å–
open-mcp-client/app
(10)

å·²è¯»å–
mcpStore.ts

å·²è¯»å–
page.tsx

å·²è¯»å–
mcp.ts

å·²è¯»å–
instructions.ts

åŸºäºå¯¹ç°æœ‰ä»£ç çš„åˆ†æï¼Œæˆ‘ä¸ºä½ è®¾è®¡ä¸€å¥—ç±»ä¼¼ CatPaw çš„èŠå¤©å®¢æˆ·ç«¯æ¶æ„æ–¹æ¡ˆã€‚è¿™ä¸ªæ¶æ„é‡ç‚¹å…³æ³¨ AI è‡ªåŠ¨æ„ŸçŸ¥å’Œè°ƒç”¨å¤šä¸ª MCP æœåŠ¡å™¨çš„èƒ½åŠ›ã€‚
ğŸ—ï¸ æ¶æ„è®¾è®¡æ–¹æ¡ˆ
ğŸ“‹ æ•´ä½“æ¶æ„æ¦‚è§ˆ
plain text
Apply
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Chat Client Application                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“± UI Layer                                                â”‚
â”‚  â”œâ”€â”€ ChatWindow (ä¸»èŠå¤©ç•Œé¢)                                 â”‚
â”‚  â”œâ”€â”€ MCP Panel (æœåŠ¡å™¨ç®¡ç†)                                  â”‚
â”‚  â””â”€â”€ Tool Inspector (å·¥å…·è°ƒç”¨å¯è§†åŒ–)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ§  AI Orchestration Layer                                 â”‚
â”‚  â”œâ”€â”€ Chat Agent (å¯¹è¯ç®¡ç†)                                   â”‚
â”‚  â”œâ”€â”€ Intent Recognition (æ„å›¾è¯†åˆ«)                           â”‚
â”‚  â”œâ”€â”€ MCP Router (å·¥å…·è·¯ç”±)                                   â”‚
â”‚  â””â”€â”€ Context Manager (ä¸Šä¸‹æ–‡ç®¡ç†)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”Œ MCP Integration Layer                                   â”‚
â”‚  â”œâ”€â”€ Connection Manager (è¿æ¥ç®¡ç†)                           â”‚
â”‚  â”œâ”€â”€ Tool Registry (å·¥å…·æ³¨å†Œ)                                â”‚
â”‚  â”œâ”€â”€ Capability Discovery (èƒ½åŠ›å‘ç°)                         â”‚
â”‚  â””â”€â”€ Request Dispatcher (è¯·æ±‚åˆ†å‘)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¾ State Management                                        â”‚
â”‚  â”œâ”€â”€ Chat Store (èŠå¤©çŠ¶æ€)                                   â”‚
â”‚  â”œâ”€â”€ MCP Store (æœåŠ¡å™¨çŠ¶æ€)                                  â”‚
â”‚  â””â”€â”€ Session Store (ä¼šè¯çŠ¶æ€)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ”¶èµ·
ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—è¯¦è§£
1. AI Orchestration Layerï¼ˆAI ç¼–æ’å±‚ï¼‰
è¿™æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒæ™ºèƒ½å±‚ï¼Œè´Ÿè´£ç†è§£ç”¨æˆ·æ„å›¾å¹¶è‡ªåŠ¨è°ƒç”¨é€‚å½“çš„ MCP å·¥å…·ã€‚
Chat Agentï¼ˆå¯¹è¯ä»£ç†ï¼‰
ç®¡ç†ä¸ç”¨æˆ·çš„å¯¹è¯æµç¨‹
ç»´æŠ¤å¯¹è¯å†å²å’Œä¸Šä¸‹æ–‡
åè°ƒå„ä¸ªç»„ä»¶çš„å·¥ä½œ
Intent Recognitionï¼ˆæ„å›¾è¯†åˆ«ï¼‰
åˆ†æç”¨æˆ·è¾“å…¥ï¼Œè¯†åˆ«éœ€è¦å“ªäº›å·¥å…·
åŸºäºç”¨æˆ·æ¶ˆæ¯å†…å®¹æ¨æ–­é€‚åˆçš„ MCP æœåŠ¡å™¨
æ”¯æŒå¤šè½®å¯¹è¯ä¸­çš„æ„å›¾å»¶ç»­
MCP Routerï¼ˆå·¥å…·è·¯ç”±ï¼‰
æ ¹æ®æ„å›¾è¯†åˆ«ç»“æœï¼Œè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ MCP æœåŠ¡å™¨å’Œå·¥å…·
å¤„ç†å·¥å…·è°ƒç”¨çš„ä¼˜å…ˆçº§å’Œä¾èµ–å…³ç³»
æ”¯æŒå¹¶è¡Œè°ƒç”¨å¤šä¸ªå·¥å…·
Context Managerï¼ˆä¸Šä¸‹æ–‡ç®¡ç†ï¼‰
ç»´æŠ¤å¯¹è¯ä¸Šä¸‹æ–‡å’Œå·¥å…·è°ƒç”¨å†å²
ç®¡ç†å·¥å…·é—´çš„æ•°æ®ä¼ é€’
å¤„ç†é”™è¯¯æ¢å¤å’Œé‡è¯•é€»è¾‘
2. MCP Integration Layerï¼ˆMCP é›†æˆå±‚ï¼‰
Connection Managerï¼ˆè¿æ¥ç®¡ç†ï¼‰
ç®¡ç†ä¸å¤šä¸ª MCP æœåŠ¡å™¨çš„è¿æ¥
å¤„ç†è¿æ¥çŠ¶æ€ç›‘æ§å’Œè‡ªåŠ¨é‡è¿
æ”¯æŒä¸åŒç±»å‹çš„ MCP åè®®ï¼ˆHTTPã€WebSocketã€gRPCï¼‰
Tool Registryï¼ˆå·¥å…·æ³¨å†Œï¼‰
åŠ¨æ€å‘ç°å’Œæ³¨å†Œ MCP æœåŠ¡å™¨æä¾›çš„å·¥å…·
ç»´æŠ¤å·¥å…·çš„å…ƒæ•°æ®å’Œèƒ½åŠ›æè¿°
æ”¯æŒå·¥å…·çš„çƒ­åŠ è½½å’Œæ›´æ–°
Capability Discoveryï¼ˆèƒ½åŠ›å‘ç°ï¼‰
è‡ªåŠ¨æ¢æµ‹ MCP æœåŠ¡å™¨çš„èƒ½åŠ›
æ„å»ºå·¥å…·çš„è¯­ä¹‰ç´¢å¼•
æ”¯æŒåŸºäºèƒ½åŠ›çš„æ™ºèƒ½è·¯ç”±
Request Dispatcherï¼ˆè¯·æ±‚åˆ†å‘ï¼‰
å°† AI çš„å·¥å…·è°ƒç”¨è¯·æ±‚åˆ†å‘åˆ°å¯¹åº”çš„ MCP æœåŠ¡å™¨
å¤„ç†è¯·æ±‚çš„åºåˆ—åŒ–å’Œç»“æœçš„ååºåˆ—åŒ–
ç®¡ç†è¯·æ±‚çš„è¶…æ—¶å’Œé”™è¯¯å¤„ç†
3. UI Layerï¼ˆç”¨æˆ·ç•Œé¢å±‚ï¼‰
ChatWindowï¼ˆä¸»èŠå¤©ç•Œé¢ï¼‰
ç±»ä¼¼ CatPaw çš„ä¸»å¯¹è¯çª—å£
æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯ã€AI å›å¤å’Œå·¥å…·è°ƒç”¨è¿‡ç¨‹
æ”¯æŒå¯Œæ–‡æœ¬ã€ä»£ç å—ã€å›¾è¡¨ç­‰å¤šç§å†…å®¹ç±»å‹
å®æ—¶æ˜¾ç¤º AI "æ€è€ƒ"è¿‡ç¨‹å’Œå·¥å…·è°ƒç”¨çŠ¶æ€
MCP Panelï¼ˆæœåŠ¡å™¨ç®¡ç†é¢æ¿ï¼‰
åŸºäºç°æœ‰çš„ ServerList ç»„ä»¶æ‰©å±•
æ˜¾ç¤ºå·²è¿æ¥çš„ MCP æœåŠ¡å™¨çŠ¶æ€
æ”¯æŒæœåŠ¡å™¨çš„æ·»åŠ ã€åˆ é™¤å’Œé…ç½®
å®æ—¶æ˜¾ç¤ºå·¥å…·çš„å¯ç”¨æ€§çŠ¶æ€
Tool Inspectorï¼ˆå·¥å…·è°ƒç”¨æ£€æŸ¥å™¨ï¼‰
å¯è§†åŒ–å·¥å…·è°ƒç”¨çš„æ‰§è¡Œè¿‡ç¨‹
æ˜¾ç¤ºå·¥å…·è°ƒç”¨çš„å‚æ•°ã€ç»“æœå’Œæ‰§è¡Œæ—¶é—´
æ”¯æŒå·¥å…·è°ƒç”¨çš„è°ƒè¯•å’Œé‡æ”¾
æä¾›å·¥å…·è°ƒç”¨çš„æ€§èƒ½åˆ†æ
4. State Managementï¼ˆçŠ¶æ€ç®¡ç†ï¼‰
åŸºäºç°æœ‰çš„ Zustand ç»“æ„æ‰©å±•ï¼š
Chat Storeï¼ˆèŠå¤©çŠ¶æ€ï¼‰
ts
Apply
interface ChatStore {
  conversations: Conversation[];
  activeConversationId: string;
  isProcessing: boolean;
  
  sendMessage: (content: string) => Promise<void>;
  processUserInput: (input: string) => Promise<void>;
  addToolCallingMessage: (toolCall: ToolCallMessage) => void;
}

Enhanced MCP Storeï¼ˆå¢å¼ºçš„MCPçŠ¶æ€ï¼‰
ts
Apply
interface EnhancedMCPStore extends MCPStore {
  registry: ToolRegistry;
  capabilities: Map<string, ServerCapability>;
  
  discoverCapabilities: (serverId: string) => Promise<void>;
  executeToolCall: (toolName: string, args: any) => Promise<any>;
  routeToolCall: (intent: Intent) => Promise<ToolCall[]>;
}

Session Storeï¼ˆä¼šè¯çŠ¶æ€ï¼‰
ts
Apply
interface SessionStore {
  currentSession: ChatSession;
  contextHistory: ContextEntry[];
  toolCallHistory: ToolCallEntry[];
  
  updateContext: (context: any) => void;
  clearSession: () => void;
  restoreSession: (sessionId: string) => void;
}

ğŸ”„ æ ¸å¿ƒå·¥ä½œæµç¨‹
1. ç”¨æˆ·æ¶ˆæ¯å¤„ç†æµç¨‹
plain text
Apply
ç”¨æˆ·è¾“å…¥ â†’ Intent Recognition â†’ MCP Router â†’ Tool Selection â†’ 
Parallel Execution â†’ Result Aggregation â†’ AI Response â†’ UI Update

2. MCP è‡ªåŠ¨å‘ç°æµç¨‹
plain text
Apply
æœåŠ¡å™¨è¿æ¥ â†’ Capability Discovery â†’ Tool Registration â†’ 
Semantic Indexing â†’ Context Integration â†’ Ready for Use

3. æ™ºèƒ½å·¥å…·è·¯ç”±æµç¨‹
plain text
Apply
åˆ†æç”¨æˆ·æ„å›¾ â†’ æŸ¥è¯¢å·¥å…·æ³¨å†Œè¡¨ â†’ è®¡ç®—åŒ¹é…åº¦ â†’ 
é€‰æ‹©æœ€ä½³å·¥å…·ç»„åˆ â†’ æ„å»ºæ‰§è¡Œè®¡åˆ’ â†’ æ‰§è¡Œå¹¶èšåˆç»“æœ

ğŸ¨ å…³é”®æŠ€æœ¯ç‰¹æ€§
1. æ™ºèƒ½æ„å›¾è¯†åˆ«
åŸºäºè¯­ä¹‰åˆ†æç†è§£ç”¨æˆ·éœ€æ±‚
æ”¯æŒæ¨¡ç³ŠåŒ¹é…å’Œä¸Šä¸‹æ–‡æ¨ç†
èƒ½å¤Ÿå¤„ç†å¤æ‚çš„å¤åˆæ„å›¾
2. è‡ªé€‚åº”å·¥å…·é€‰æ‹©
æ ¹æ®å·¥å…·çš„å®æ—¶å¯ç”¨æ€§å’Œæ€§èƒ½è‡ªåŠ¨é€‰æ‹©
æ”¯æŒå·¥å…·çš„ A/B æµ‹è¯•å’Œè´Ÿè½½å‡è¡¡
åŸºäºå†å²æˆåŠŸç‡ä¼˜åŒ–å·¥å…·é€‰æ‹©
3. å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–
è‡ªåŠ¨è¯†åˆ«å¯å¹¶è¡Œæ‰§è¡Œçš„å·¥å…·è°ƒç”¨
ç®¡ç†å·¥å…·é—´çš„æ•°æ®ä¾èµ–å…³ç³»
ä¼˜åŒ–æ•´ä½“å“åº”æ—¶é—´
4. é”™è¯¯æ¢å¤æœºåˆ¶
å·¥å…·è°ƒç”¨å¤±è´¥æ—¶çš„è‡ªåŠ¨é‡è¯•
é™çº§ç­–ç•¥å’Œå¤‡é€‰æ–¹æ¡ˆ
ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
5. ä¸Šä¸‹æ–‡æ„ŸçŸ¥
ç»´æŠ¤é•¿æœŸå¯¹è¯å†å²
å·¥å…·è°ƒç”¨ç»“æœçš„æŒä¹…åŒ–
è·¨ä¼šè¯çš„ä¸Šä¸‹æ–‡ç»§æ‰¿
ğŸ“ ç›®å½•ç»“æ„å»ºè®®
plain text
Apply
packages/client/src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Chat/
â”‚   â”‚   â”œâ”€â”€ ChatWindow.tsx
â”‚   â”‚   â”œâ”€â”€ MessageList.tsx
â”‚   â”‚   â”œâ”€â”€ MessageInput.tsx
â”‚   â”‚   â””â”€â”€ ToolCallDisplay.tsx
â”‚   â”œâ”€â”€ MCP/
â”‚   â”‚   â”œâ”€â”€ ServerList.tsx (ç°æœ‰)
â”‚   â”‚   â”œâ”€â”€ ServerPanel.tsx
â”‚   â”‚   â”œâ”€â”€ ToolRegistry.tsx
â”‚   â”‚   â””â”€â”€ CapabilityViewer.tsx
â”‚   â””â”€â”€ Inspector/
â”‚       â”œâ”€â”€ ToolInspector.tsx
â”‚       â”œâ”€â”€ CallTrace.tsx
â”‚       â””â”€â”€ PerformanceChart.tsx
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”œâ”€â”€ ChatAgent.ts
â”‚   â”‚   â”œâ”€â”€ IntentRecognizer.ts
â”‚   â”‚   â””â”€â”€ ContextManager.ts
â”‚   â”œâ”€â”€ mcp/
â”‚   â”‚   â”œâ”€â”€ ConnectionManager.ts
â”‚   â”‚   â”œâ”€â”€ ToolRegistry.ts
â”‚   â”‚   â”œâ”€â”€ CapabilityDiscovery.ts
â”‚   â”‚   â””â”€â”€ RequestDispatcher.ts
â”‚   â””â”€â”€ routing/
â”‚       â”œâ”€â”€ MCPRouter.ts
â”‚       â”œâ”€â”€ ToolSelector.ts
â”‚       â””â”€â”€ ExecutionPlanner.ts
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ chatStore.ts
â”‚   â”œâ”€â”€ mcpStore.ts (å¢å¼ºç°æœ‰)
â”‚   â””â”€â”€ sessionStore.ts
â””â”€â”€ hooks/
    â”œâ”€â”€ useChat.ts
    â”œâ”€â”€ useMCPTools.ts
    â”œâ”€â”€ useToolCalling.ts
    â””â”€â”€ useIntentRecognition.ts

å±•å¼€
ğŸš€ å®ç°ä¼˜å…ˆçº§
Phase 1: åŸºç¡€æ¶æ„
å¢å¼ºç°æœ‰çš„ MCP Store
å®ç° Connection Manager å’Œ Tool Registry
æ„å»ºåŸºç¡€çš„ ChatWindow ç»„ä»¶
Phase 2: AI é›†æˆ
å®ç° Chat Agent å’Œ Intent Recognition
æ„å»º MCP Router å’Œ Tool Selector
é›†æˆè‡ªåŠ¨å·¥å…·è°ƒç”¨èƒ½åŠ›
Phase 3: é«˜çº§ç‰¹æ€§
å®ç°å¹¶è¡Œæ‰§è¡Œå’Œä¼˜åŒ–
æ·»åŠ å·¥å…·è°ƒç”¨å¯è§†åŒ–
å®Œå–„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶
Phase 4: ç”¨æˆ·ä½“éªŒ
ä¼˜åŒ– UI/UX è®¾è®¡
æ·»åŠ é«˜çº§è°ƒè¯•åŠŸèƒ½
å®ç°ä¼šè¯ç®¡ç†å’ŒæŒä¹…åŒ–
è¿™ä¸ªæ¶æ„è®¾è®¡ç¡®ä¿äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€æ¨¡å—åŒ–å’Œæ™ºèƒ½åŒ–ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°æ”¯æŒç±»ä¼¼ CatPaw çš„ç”¨æˆ·ä½“éªŒï¼ŒåŒæ—¶æä¾›å¼ºå¤§çš„ MCP é›†æˆèƒ½åŠ›ã€‚